C51 COMPILER V9.54   MAIN                                                                  11/17/2022 10:12:40 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN main.OBJ
COMPILER INVOKED BY: E:\MDK5\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND

line level    source

   1          /**************************************************************************************
   2          实验现象：下载程序后，操作K3按键使D1状态取反
   3                            
   4          接线说明： (具体接线图可见开发攻略对应实验的“实验现象”章节)
   5                             1，单片机-->LED&交通灯模块
   6                                          P20-->D1
   7                             2，单片机-->独立按键模块
   8                                          P32-->K3        
   9                  
  10          注意事项：                                                                                                                                                              
  11          
  12            
  13          ***************************************************************************************/
  14          
  15          #include "reg52.h"                       //此文件中定义了单片机的一些特殊功能寄存器
  16          
  17          typedef unsigned int u16;         //对数据类型进行声明定义
  18          typedef unsigned char u8;
  19          
  20          sbit k3=P3^2;  //定义按键K3
  21          sbit led=P1^0;   //定义P20口是led
  22          
  23          /****************************************** *************************************
  24          * 函 数 名         : delay
  25          * 函数功能                 : 延时函数，i=1时，大约延时10us
  26          *******************************************************************************/
  27          void delay(u16 i)
  28          {
  29   1              while(i--);     
  30   1      }
  31          
  32          /*******************************************************************************
  33          * 函 数 名         : Int1Init()
  34          * 函数功能                 : 设置外部中断1
  35          * 输    入         : 无
  36          * 输    出         : 无
  37          *******************************************************************************/
  38          void Int0Init()
  39          {
  40   1              //设置INT0
  41   1              IT0=1;//跳变沿出发方式（下降沿）
  42   1              EX0=1;//打开INT0的中断允许。    
  43   1              EA=1;//打开总中断       
  44   1      }
  45          
  46          /*******************************************************************************
  47          * 函 数 名       : main
  48          * 函数功能               : 主函数
  49          * 输    入       : 无
  50          * 输    出       : 无
  51          *******************************************************************************/
  52          void main()
  53          {       
  54   1              Int0Init();  // 设置外部中断0
  55   1              while(1);               
C51 COMPILER V9.54   MAIN                                                                  11/17/2022 10:12:40 PAGE 2   

  56   1      }
  57          
  58          /*******************************************************************************
  59          * 函 数 名         : Int0()     interrupt 0
  60          * 函数功能                 : 外部中断0的中断函数
  61          * 输    入         : 无
  62          * 输    出         : 无
  63          *******************************************************************************/
  64          
  65          void Int0()     interrupt 0             //外部中断0的中断函数
  66          {
  67   1              delay(1000);     //延时消抖
  68   1              if(k3==0)
  69   1              {
  70   2                      led=~led;
  71   2              }
  72   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     59    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
