C51 COMPILER V9.59.0.0   DS18B20                                                           12/10/2021 23:05:02 PAGE 1   


C51 COMPILER V9.59.0.0, COMPILATION OF MODULE DS18B20
OBJECT MODULE PLACED IN .\Objects\DS18B20.obj
COMPILER INVOKED BY: E:\SCM\keil 4\C51\BIN\C51.EXE DS18B20.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listing
                    -s\DS18B20.lst) OBJECT(.\Objects\DS18B20.obj)

line level    source

   1          #include "reg52.h"
   2          #include "delay.h"
   3          #include "oneWire.h"
   4          void  Ds18b20()
   5          {
   6   1              Ds18b20Init();
   7   1              Delay1ms(1);
   8   1              Ds18b20WriteByte(0xcc);         //跳过ROM操作命令                
   9   1              Ds18b20WriteByte(0x44);     //温度转换命令
  10   1      //      Delay1ms(100);  //等待转换成功，而如果你是一直刷着的话，就不用这个延时了
  11   1         
  12   1      }
  13          //发送读取温度命令
  14          void  Ds18b20ReadT()
  15          {       
  16   1      
  17   1              Ds18b20Init();
  18   1              Delay1ms(1);
  19   1              Ds18b20WriteByte(0xcc);  //跳过ROM操作命令
  20   1              Ds18b20WriteByte(0xbe);  //发送读取温度命令
  21   1      }
  22          //读取温度
  23          int Ds18b20ReadTemp()
  24          {
  25   1              int temp=0;
  26   1              unsigned char tmh,tml;
  27   1              Ds18b20();                              //发送转换命令
  28   1              Ds18b20ReadT();                 //发送读取温度命令
  29   1              tml=Ds18b20ReadByte();          //读取低八位字节
  30   1              tmh=Ds18b20ReadByte();          //读取高八位字节
  31   1              temp=tmh;
  32   1              temp<<=8;    
  33   1              temp|=tml;
  34   1              return temp;
  35   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     63    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       1
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
