C51 COMPILER V9.60.0.0   MAIN                                                              05/20/2022 15:06:53 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: E:\MDK5\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\main.ls
                    -t) OBJECT(.\Objects\main.obj)

line level    source

   1          #include "reg52.h"
   2          #include <intrins.h>
   3          #include "key.h"
   4          #include "timer0.h"
   5          #include "delay.h"
   6          #include "smg.h"
   7           
   8          sbit k1=P3^4;
   9          sbit k2=P3^5;
  10          sbit k3=P3^6;
  11          sbit k4=P3^7;
  12          
  13          unsigned char keynum,ledmode,shudu,zt,temp=5,pmode,kg=0xff;
  14          
  15          void Timer1() interrupt 1
  16          {
  17   1          static unsigned int T1count;
  18   1              TL0 = 0x18;             //设置定时初值
  19   1              TH0 = 0xFC;             //设置定时初值
  20   1              T1count++;
  21   1                      if(k3==0)
  22   1              {
  23   2                      delay(1000);
  24   2                      while(k3==0);
  25   2                      delay(1000);
  26   2              }
  27   1              if(k4==0)
  28   1              {
  29   2                      delay(1000);
  30   2                      while(k4==0);
  31   2                      delay(1000);
  32   2                      pmode=ledmode;
  33   2                      ledmode=temp;
  34   2                      temp=pmode;
  35   2                      P1=kg;
  36   2                      kg=zt;
  37   2              }
  38   1              if(T1count>=(500-shudu*200))
  39   1              {
  40   2                      T1count=0;
  41   2                      if(ledmode==0)
  42   2                      {
  43   3                              P1=_crol_(P1,1);
  44   3                      }
  45   2                      if(ledmode==1)
  46   2                      {
  47   3                              P1=_cror_(P1,1);
  48   3                      }
  49   2                      if(ledmode==2)
  50   2                      {
  51   3                              P1=P1<<1;
  52   3                      }
  53   2                      if(ledmode==3)
  54   2                      {
C51 COMPILER V9.60.0.0   MAIN                                                              05/20/2022 15:06:53 PAGE 2   

  55   3                              P1=P1>>1;
  56   3                      }
  57   2              }
  58   1      }
  59          void main()
  60          {
  61   1              P1=0xfe;
  62   1              Timer0Init();
  63   1              while(1)
  64   1              {
  65   2                      smg(1,ledmode);
  66   2                      keynum=key();
  67   2                      if(keynum==1)
  68   2                      {
  69   3                              if(keynum==1)
  70   3                              {
  71   4                                      ledmode++;
  72   4                                      if(ledmode>=4)
  73   4                                      {
  74   5                                              ledmode=0;
  75   5                                      }
  76   4                              }
  77   3                      }
  78   2                      if(keynum==2)
  79   2                      {
  80   3                              if(keynum==2)
  81   3                              {
  82   4                                      shudu++;
  83   4                                      if(shudu>=3)shudu=0;
  84   4                              }
  85   3                      }
  86   2              if(P1==0x00)
  87   2                      {
  88   3                              P1=0xfe;
  89   3                      }
  90   2              }               
  91   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    305    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      9    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
