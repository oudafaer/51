C51 COMPILER V9.59.0.0   MAIN                                                              01/29/2022 01:48:56 PAGE 1   


C51 COMPILER V9.59.0.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: E:\SCM\keil 4\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\m
                    -ain.lst) OBJECT(.\Objects\main.obj)

line level    source

   1          #include "reg52.h"  //定义头文件
   2          
   3          typedef unsigned int u16;         //对数据类型进行声明定义
   4          typedef unsigned char u8;
   5          
   6          //位声明
   7          sbit led0=P1^0;
   8          sbit led1=P1^1;
   9          sbit led2=P1^2;
  10          sbit led3=P1^3;
  11          
  12          //定义全局变量
  13          u16 i;
  14          
  15          //函数声明
  16          void Uart_Init();
  17          
  18          //串口参数初始化设置函数
  19          void Uart_Init(void)
  20          {
  21   1          SCON=0x50;                  //串口工作方式1:10位异步收发器，1位起始位，8位数据位，1位停止位;REN=1:允许
             -接收 
  22   1      //    PCON=0x00;4800 9600                //SMOD=0:波特率不加倍 
  23   1          TMOD=0x20;                  //定时器T1工作方式2，8位自动重装载定时器/计数器，用于UART波特率 
  24   1          TH1=0xFD;                   //定时器初值设置0xFD，单片机晶振11.0592MHz，对应波特率9600
  25   1          TL1=0x00;                   //无需设置该位，保持为0x00
  26   1          TR1=1;                          //开启定时器T1，允许T1计数
  27   1          SM0=0;//设置串口工作方式
  28   1          SM1=1;
  29   1          REN=1;      
  30   1              ES=1;                       //串口中断允许位置1，开启串口中断
  31   1          EA=1;                       //总中断允许位，开启总中断
  32   1      }
  33          //主函数
  34          void main()
  35          {
  36   1              Uart_Init();
  37   1              while(1);
  38   1      }
  39          //中断服务函数
  40          void uart() interrupt 4
  41          {
  42   1              u8 receiveData;
  43   1              i=SBUF;                   
  44   1               switch(i)
  45   1              {
  46   2                      case 0: //收到“0”
  47   2                              led0=0;
  48   2                              break;
  49   2                      
  50   2                      case 1: //收到“1”
  51   2                              led1=0;
  52   2                              break;
  53   2                      
C51 COMPILER V9.59.0.0   MAIN                                                              01/29/2022 01:48:56 PAGE 2   

  54   2                      case 2: //收到“2”
  55   2                              led2=0;
  56   2                              break;
  57   2                      
  58   2                      case 3: //收到“3”
  59   2                              led3=0;
  60   2                              break;
  61   2                      default:
  62   2                              P2=0XFF;
  63   2                              break;
  64   2              }
  65   1              receiveData=SBUF;        //出去接收到的数据
  66   1              RI=0;                    //清除接收中断标志位
  67   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     96    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      2       1
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
