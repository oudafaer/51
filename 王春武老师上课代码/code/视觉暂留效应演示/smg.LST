C51 COMPILER V9.01   SMG                                                                   07/14/2018 21:39:11 PAGE 1   


C51 COMPILER V9.01, COMPILATION OF MODULE SMG
OBJECT MODULE PLACED IN smg.OBJ
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE smg.c BROWSE DEBUG OBJECTEXTEND

line level    source

   1          #include "reg51.h"
   2          
   3          sbit a=P1^5;
   4          sbit b=P1^3;
   5          sbit c=P1^1;
   6          sbit Lock=P3^2;
   7          sbit Dat=P3^7;
   8          sbit Clk=P3^6;
   9          sbit k1=P3^4;
  10          
  11          void Send(unsigned char n);      
  12          void CS(unsigned char n);
  13          
  14          unsigned int n;
  15          unsigned char hour,minute,second,bsecond,cnt,pos,buf[8]={0,0,0,0,0,0,2,1},zxm[]={0xfc,0x60,0xda,0xf2,0x66,
             -0xb6,0xbe,0xe0,0xfe,0xf6};
  16          bit sec,keymark;
  17          
  18          void T0Ser() interrupt 1
  19          {
  20   1         TH0=(65536-n)>>8;
  21   1         TL0=62236-n;
  22   1         
  23   1         if(++pos>5)
  24   1            pos=0;
  25   1         
  26   1         CS(7); 
  27   1         Send(zxm[buf[pos]]); 
  28   1         CS(pos);
  29   1      }
  30          
  31          void CS(unsigned char n)
  32          {
  33   1         c=n/4;
  34   1         b=n%4/2;
  35   1         a=n%2;   
  36   1      }
  37          
  38          void Send(unsigned char n)
  39          {
  40   1         char i;
  41   1      
  42   1         for(i=0;i<8;i++)
  43   1         {
  44   2            if(n&1)
  45   2                  Dat=1;
  46   2                else
  47   2                  Dat=0;
  48   2                
  49   2                Clk=0;
  50   2                Clk=1;
  51   2                n>>=1;                  
  52   2         }
  53   1         Lock=0;
  54   1         Lock=1;
C51 COMPILER V9.01   SMG                                                                   07/14/2018 21:39:11 PAGE 2   

  55   1      }
  56          
  57          void main()
  58          { 
  59   1         TMOD=0X01;
  60   1         IE=0X82;
  61   1         TR0=1;  
  62   1       
  63   1         n=0;
  64   1      
  65   1         while(1)
  66   1         {        
  67   2                if(!k1&&!keymark)
  68   2                {
  69   3                   keymark=1;
  70   3                       n=n-10000;
  71   3                       if(n<10000)
  72   3                          n=1000;
  73   3                       P2=~P2;
  74   3                }
  75   2                else if(k1)
  76   2                   keymark=0;
  77   2         }
  78   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    244    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     26    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =      2    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
