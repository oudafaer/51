C51 COMPILER V9.59.0.0   MAIN                                                              11/12/2021 10:51:06 PAGE 1   


C51 COMPILER V9.59.0.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN main.OBJ
COMPILER INVOKED BY: E:\SCM\keil 4\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND

line level    source

   1          /**************************************************************************************
   2          实验现象：下载程序后，D1小灯循环点亮1秒，熄灭1秒。使用单片机内部定时器可以实现准确延时
   3                            
   4          接线说明： (具体接线图可见开发攻略对应实验的“实验现象”章节)
   5                             1，单片机-->LED&交通灯模块
   6                                          P20-->D1
   7                                  
   8                  
   9          注意事项：                                                                                                                                                              
  10            
  11          ***************************************************************************************/
  12          
  13          #include "reg52.h"                       //此文件中定义了单片机的一些特殊功能寄存器
  14          
  15          typedef unsigned int u16;         //对数据类型进行声明定义
  16          typedef unsigned char u8;
  17          
  18          sbit led=P2^0;   //定义P20口是led
  19          
  20          
  21          /*******************************************************************************
  22          * 函 数 名         : Timer0Init
  23          * 函数功能                 : 定时器0初始化
  24          * 输    入         : 无
  25          * 输    出         : 无
  26          *******************************************************************************/
  27          void Timer0Init()
  28          {
  29   1              TMOD|=0X01;//选择为定时器0模式，工作方式1，仅用TR0打开启动。
  30   1      
  31   1              TH0=0XFC;       //给定时器赋初值，定时1ms
  32   1              TL0=0X18;       
  33   1              ET0=1;//打开定时器0中断允许
  34   1              EA=1;//打开总中断
  35   1              TR0=1;//打开定时器                      
  36   1      }
  37          
  38          /*******************************************************************************
  39          * 函 数 名       : main
  40          * 函数功能               : 主函数
  41          * 输    入       : 无
  42          * 输    出       : 无
  43          *******************************************************************************/
  44          void main()
  45          {       
  46   1              Timer0Init();  //定时器0初始化
  47   1              while(1);               
  48   1      }
  49          
  50          /*******************************************************************************
  51          * 函 数 名         : void Timer0() interrupt 1
  52          * 函数功能                 : 定时器0中断函数
  53          * 输    入         : 无
  54          * 输    出         : 无
  55          *******************************************************************************/
C51 COMPILER V9.59.0.0   MAIN                                                              11/12/2021 10:51:06 PAGE 2   

  56          void Timer0() interrupt 1
  57          {
  58   1              static u16 i;
  59   1              TH0=0XFC;       //给定时器赋初值，定时1ms
  60   1              TL0=0X18;
  61   1              i++;
  62   1              if(i==1000)
  63   1              {
  64   2                      i=0;
  65   2                      led=~led;       
  66   2              }       
  67   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     60    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      2    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
